var socialTracking=socialTracking||{};socialTracking.track=function(a,b,c){try{"undefined"!=typeof ga?(console.log("SocialTracking: ga.send"),ga("send","social",a,b,c),ga("send","event",a,b,c)):(console.log("SocialTracking: _gaq._track"),_gaq.push(["_trackSocial",a,b,c]),_gaq.push(["_trackEvent",a,b,c]))}catch(d){console.log("SocialTracking: Google Analytics not set.")}},socialTracking.init=function(){socialTracking.oldOnLoad=window.onload,window.onload=function(){socialTracking.oldOnLoad&&socialTracking.oldOnLoad(),socialTracking.run()},console.log("init")},socialTracking.run=function(){console.log("run");try{FB&&FB.Event&&FB.Event.subscribe&&(FB.Event.subscribe("edge.create",function(a){socialTracking.track("facebook","like",a)}),FB.Event.subscribe("edge.remove",function(a){socialTracking.track("facebook","unlike",a)}),FB.Event.subscribe("message.send",function(a){socialTracking.track("facebook","send",a)}))}catch(a){console.log("SocialTracking: Facebook not detected.")}intent_handler_click=function(a){if(a){var b;a.target&&"IFRAME"==a.target.nodeName&&(opt_target=socialTracking.extractParamFromUri_(a.target.src,"url")),socialTracking.track("twitter","click",b)}},intent_handler_tweet=function(a){if(a){var b;a.target&&"IFRAME"==a.target.nodeName&&(opt_target=socialTracking.extractParamFromUri_(a.target.src,"url")),socialTracking.track("twitter","tweet",b)}},intent_handler_retweet=function(a){if(a){var b;a.target&&"IFRAME"==a.target.nodeName&&(opt_target=socialTracking.extractParamFromUri_(a.target.src,"url")),socialTracking.track("twitter","retweet",b)}},intent_handler_favorite=function(a){if(a){var b;a.target&&"IFRAME"==a.target.nodeName&&(opt_target=socialTracking.extractParamFromUri_(a.target.src,"url")),socialTracking.track("twitter","favorite",b)}},intent_handler_follow=function(a){if(a){var b;a.target&&"IFRAME"==a.target.nodeName&&(opt_target=socialTracking.extractParamFromUri_(a.target.src,"url")),socialTracking.track("twitter","follow",b)}};try{twttr.ready(function(a){a.events.bind("click",intent_handler_click),a.events.bind("tweet",intent_handler_tweet),a.events.bind("retweet",intent_handler_retweet),a.events.bind("favorite",intent_handler_favorite),a.events.bind("follow",intent_handler_follow)})}catch(a){console.log("SocialTracking: Twitter not detected.")}},socialTracking.trackTwitterHandler_=function(a,b){var c;if(a&&"tweet"==a.type||"click"==a.type){"IFRAME"==a.target.nodeName&&(c=socialTracking.extractParamFromUri_(a.target.src,"url"));var d=a.type+("click"==a.type?"-"+a.region:"");socialTracking.track("twitter",d,b)}},socialTracking.trackTwitter=function(a){intent_handler=function(b){socialTracking.trackTwitterHandler_(b,a)}},socialTracking.extractParamFromUri_=function(a,b){if(a){var c=new RegExp("[\\?&#]"+b+"=([^&#]*)"),d=c.exec(a);return null!=d?unescape(d[1]):void 0}},socialTracking.init();